import{u as w,j as e}from"./components-core-D_z9Ii65.js";import{r,v as S,ae as k,V as C,S as u,a7 as A,T as d,X as U,K as v,i as P,b as N,d as T}from"./vendor-icons-c6Hxm0mJ.js";import"./vendor-react-OvXVS5lI.js";function D({onClose:o}){const{addToast:t}=w(),[a,i]=r.useState("general"),[h,m]=r.useState(!1),[x,g]=r.useState([{id:1,name:"Admin User",email:"admin@ndr.local",role:"Administrator",status:"active",lastLogin:"Just now"},{id:2,name:"Security Analyst",email:"analyst@ndr.local",role:"Analyst",status:"active",lastLogin:"2 hours ago"},{id:3,name:"Viewer",email:"audit@ndr.local",role:"Viewer",status:"inactive",lastLogin:"5 days ago"}]),[j,b]=r.useState([{id:1,name:"Sensor Fleet A",prefix:"sk_live_...",created:"2024-01-15",lastUsed:"1m ago",status:"active"},{id:2,name:"SIEM Exporter",prefix:"sk_live_...",created:"2024-02-20",lastUsed:"5m ago",status:"active"},{id:3,name:"Dev Test",prefix:"sk_test_...",created:"2024-03-10",lastUsed:"Never",status:"revoked"}]),[n,c]=r.useState({theme:"dark",refreshRate:"30",retentionDays:"90",emailNotifications:!0,slackNotifications:!1,autoUpdate:!0}),p=()=>{m(!0),setTimeout(()=>{m(!1),t("Settings saved successfully","success")},800)},f=s=>{g(x.filter(l=>l.id!==s)),t("User deleted","info")},y=s=>{b(j.map(l=>l.id===s?{...l,status:"revoked"}:l)),t("API Key revoked","info")};return e.jsx("div",{className:"settings-overlay",children:e.jsxs("div",{className:"settings-modal",children:[e.jsxs("div",{className:"settings-sidebar",children:[e.jsx("div",{className:"settings-header",children:e.jsx("h2",{children:"Settings"})}),e.jsxs("nav",{className:"settings-nav",children:[e.jsxs("button",{className:`nav-item ${a==="general"?"active":""}`,onClick:()=>i("general"),children:[e.jsx(S,{className:"w-4 h-4"})," General"]}),e.jsxs("button",{className:`nav-item ${a==="users"?"active":""}`,onClick:()=>i("users"),children:[e.jsx(k,{className:"w-4 h-4"})," Users & Roles"]}),e.jsxs("button",{className:`nav-item ${a==="apikeys"?"active":""}`,onClick:()=>i("apikeys"),children:[e.jsx(C,{className:"w-4 h-4"})," API Keys"]}),e.jsxs("button",{className:`nav-item ${a==="security"?"active":""}`,onClick:()=>i("security"),children:[e.jsx(u,{className:"w-4 h-4"})," Security"]}),e.jsxs("button",{className:`nav-item ${a==="notifications"?"active":""}`,onClick:()=>i("notifications"),children:[e.jsx(A,{className:"w-4 h-4"})," Notifications"]}),e.jsxs("button",{className:`nav-item ${a==="debug"?"active":""}`,onClick:()=>i("debug"),children:[e.jsx(d,{className:"w-4 h-4"})," Debug"]})]}),e.jsx("div",{className:"settings-footer",children:e.jsx("span",{className:"version",children:"v2.4.0-beta"})})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsxs("h3",{children:[a==="general"&&"General Configuration",a==="users"&&"User Management",a==="apikeys"&&"API Key Management",a==="security"&&"Security Policies",a==="notifications"&&"Notification Preferences"]}),e.jsx("button",{className:"close-btn",onClick:o,children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"content-body",children:[a==="general"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dashboard Refresh Rate (seconds)"}),e.jsxs("select",{value:n.refreshRate,onChange:s=>c({...n,refreshRate:s.target.value}),children:[e.jsx("option",{value:"15",children:"15 seconds"}),e.jsx("option",{value:"30",children:"30 seconds"}),e.jsx("option",{value:"60",children:"60 seconds"}),e.jsx("option",{value:"manual",children:"Manual only"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Data Retention Period (days)"}),e.jsxs("select",{value:n.retentionDays,onChange:s=>c({...n,retentionDays:s.target.value}),children:[e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"90",children:"90 days"}),e.jsx("option",{value:"180",children:"180 days"}),e.jsx("option",{value:"365",children:"1 year"})]})]}),e.jsxs("div",{className:"form-group checkbox",children:[e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:n.autoUpdate,onChange:s=>c({...n,autoUpdate:s.target.checked})}),e.jsx("span",{className:"slider round"})]}),e.jsx("span",{children:"Enable Automatic System Updates"})]})]}),a==="users"&&e.jsxs("div",{className:"list-section",children:[e.jsx("div",{className:"list-actions",children:e.jsxs("button",{className:"btn-primary",onClick:()=>t("Add User modal would open here","info"),children:[e.jsx(v,{className:"w-4 h-4"})," Add User"]})}),e.jsxs("table",{className:"settings-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Last Login"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"user-cell",children:[e.jsx("div",{className:"user-avatar-sm",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]})}),e.jsx("td",{children:e.jsx("span",{className:"role-badge",children:s.role})}),e.jsxs("td",{children:[e.jsx("span",{className:`status-dot ${s.status}`})," ",s.status]}),e.jsx("td",{className:"text-gray-400",children:s.lastLogin}),e.jsx("td",{children:e.jsx("button",{className:"btn-icon-sm text-red-400",onClick:()=>f(s.id),children:e.jsx(P,{className:"w-4 h-4"})})})]},s.id))})]})]}),a==="apikeys"&&e.jsxs("div",{className:"list-section",children:[e.jsx("div",{className:"list-actions",children:e.jsxs("button",{className:"btn-primary",onClick:()=>t("Generate Key modal would open here","info"),children:[e.jsx(v,{className:"w-4 h-4"})," Generate New Key"]})}),e.jsxs("table",{className:"settings-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Key Prefix"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-medium",children:s.name}),e.jsx("td",{className:"mono text-xs",children:s.prefix}),e.jsx("td",{className:"text-gray-400",children:s.created}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${s.status}`,children:s.status})}),e.jsx("td",{children:s.status==="active"&&e.jsx("button",{className:"btn-text-danger",onClick:()=>y(s.id),children:"Revoke"})})]},s.id))})]})]}),(a==="security"||a==="notifications")&&e.jsxs("div",{className:"empty-state",children:[e.jsx(u,{className:"w-12 h-12 text-gray-700 mb-4"}),e.jsx("p",{children:"This configuration section is under development."})]}),a==="debug"&&e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"debug-warning",children:[e.jsx(d,{className:"w-5 h-5 text-yellow-500"}),e.jsx("p",{children:"These tools are for testing error handling and debugging purposes only."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Error Boundary Test"}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Clicking this button will throw a JavaScript error to test the global Error Boundary."}),e.jsxs("button",{className:"btn-danger",onClick:()=>{throw new Error("Manual test error triggered from Settings")},children:[e.jsx(d,{className:"w-4 h-4"})," Trigger Crash"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"API Error Simulation"}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Force next API request to fail (simulates 500 Server Error)."}),e.jsxs("button",{className:"btn-secondary",onClick:()=>t("API Error Simulation enabled for next request","info"),children:[e.jsx(N,{className:"w-4 h-4"})," Simulate API Failure"]})]})]})]}),e.jsxs("div",{className:"content-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:o,children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:p,disabled:h,children:h?e.jsx(N,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"})," Save Changes"]})})]})]})]})})}export{D as default};
