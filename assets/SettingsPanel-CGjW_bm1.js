import{u as w,j as s}from"./components-core-BRDcvPfU.js";import{r,M as S,a4 as k,O as C,S as u,a0 as A,T as d,X as U,z as v,a5 as P,b as N,d as T}from"./vendor-icons-B0irx6x7.js";import"./vendor-react-OvXVS5lI.js";function D({onClose:o}){const{addToast:t}=w(),[a,i]=r.useState("general"),[h,m]=r.useState(!1),[x,g]=r.useState([{id:1,name:"Admin User",email:"admin@ndr.local",role:"Administrator",status:"active",lastLogin:"Just now"},{id:2,name:"Security Analyst",email:"analyst@ndr.local",role:"Analyst",status:"active",lastLogin:"2 hours ago"},{id:3,name:"Viewer",email:"audit@ndr.local",role:"Viewer",status:"inactive",lastLogin:"5 days ago"}]),[j,b]=r.useState([{id:1,name:"Sensor Fleet A",prefix:"sk_live_...",created:"2024-01-15",lastUsed:"1m ago",status:"active"},{id:2,name:"SIEM Exporter",prefix:"sk_live_...",created:"2024-02-20",lastUsed:"5m ago",status:"active"},{id:3,name:"Dev Test",prefix:"sk_test_...",created:"2024-03-10",lastUsed:"Never",status:"revoked"}]),[n,c]=r.useState({theme:"dark",refreshRate:"30",retentionDays:"90",emailNotifications:!0,slackNotifications:!1,autoUpdate:!0}),p=()=>{m(!0),setTimeout(()=>{m(!1),t("Settings saved successfully","success")},800)},f=e=>{g(x.filter(l=>l.id!==e)),t("User deleted","info")},y=e=>{b(j.map(l=>l.id===e?{...l,status:"revoked"}:l)),t("API Key revoked","info")};return s.jsx("div",{className:"settings-overlay",children:s.jsxs("div",{className:"settings-modal",children:[s.jsxs("div",{className:"settings-sidebar",children:[s.jsx("div",{className:"settings-header",children:s.jsx("h2",{children:"Settings"})}),s.jsxs("nav",{className:"settings-nav",children:[s.jsxs("button",{className:`nav-item ${a==="general"?"active":""}`,onClick:()=>i("general"),children:[s.jsx(S,{className:"w-4 h-4"})," General"]}),s.jsxs("button",{className:`nav-item ${a==="users"?"active":""}`,onClick:()=>i("users"),children:[s.jsx(k,{className:"w-4 h-4"})," Users & Roles"]}),s.jsxs("button",{className:`nav-item ${a==="apikeys"?"active":""}`,onClick:()=>i("apikeys"),children:[s.jsx(C,{className:"w-4 h-4"})," API Keys"]}),s.jsxs("button",{className:`nav-item ${a==="security"?"active":""}`,onClick:()=>i("security"),children:[s.jsx(u,{className:"w-4 h-4"})," Security"]}),s.jsxs("button",{className:`nav-item ${a==="notifications"?"active":""}`,onClick:()=>i("notifications"),children:[s.jsx(A,{className:"w-4 h-4"})," Notifications"]}),s.jsxs("button",{className:`nav-item ${a==="debug"?"active":""}`,onClick:()=>i("debug"),children:[s.jsx(d,{className:"w-4 h-4"})," Debug"]})]}),s.jsx("div",{className:"settings-footer",children:s.jsx("span",{className:"version",children:"v2.4.0-beta"})})]}),s.jsxs("div",{className:"settings-content",children:[s.jsxs("div",{className:"content-header",children:[s.jsxs("h3",{children:[a==="general"&&"General Configuration",a==="users"&&"User Management",a==="apikeys"&&"API Key Management",a==="security"&&"Security Policies",a==="notifications"&&"Notification Preferences"]}),s.jsx("button",{className:"close-btn",onClick:o,children:s.jsx(U,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"content-body",children:[a==="general"&&s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Dashboard Refresh Rate (seconds)"}),s.jsxs("select",{value:n.refreshRate,onChange:e=>c({...n,refreshRate:e.target.value}),children:[s.jsx("option",{value:"15",children:"15 seconds"}),s.jsx("option",{value:"30",children:"30 seconds"}),s.jsx("option",{value:"60",children:"60 seconds"}),s.jsx("option",{value:"manual",children:"Manual only"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Data Retention Period (days)"}),s.jsxs("select",{value:n.retentionDays,onChange:e=>c({...n,retentionDays:e.target.value}),children:[s.jsx("option",{value:"30",children:"30 days"}),s.jsx("option",{value:"90",children:"90 days"}),s.jsx("option",{value:"180",children:"180 days"}),s.jsx("option",{value:"365",children:"1 year"})]})]}),s.jsxs("div",{className:"form-group checkbox",children:[s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:n.autoUpdate,onChange:e=>c({...n,autoUpdate:e.target.checked})}),s.jsx("span",{className:"slider round"})]}),s.jsx("span",{children:"Enable Automatic System Updates"})]})]}),a==="users"&&s.jsxs("div",{className:"list-section",children:[s.jsx("div",{className:"list-actions",children:s.jsxs("button",{className:"btn-primary",onClick:()=>t("Add User modal would open here","info"),children:[s.jsx(v,{className:"w-4 h-4"})," Add User"]})}),s.jsxs("table",{className:"settings-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Last Login"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:x.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"user-cell",children:[s.jsx("div",{className:"user-avatar-sm",children:e.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsx("div",{className:"text-xs text-gray-500",children:e.email})]})]})}),s.jsx("td",{children:s.jsx("span",{className:"role-badge",children:e.role})}),s.jsxs("td",{children:[s.jsx("span",{className:`status-dot ${e.status}`})," ",e.status]}),s.jsx("td",{className:"text-gray-400",children:e.lastLogin}),s.jsx("td",{children:s.jsx("button",{className:"btn-icon-sm text-red-400",onClick:()=>f(e.id),children:s.jsx(P,{className:"w-4 h-4"})})})]},e.id))})]})]}),a==="apikeys"&&s.jsxs("div",{className:"list-section",children:[s.jsx("div",{className:"list-actions",children:s.jsxs("button",{className:"btn-primary",onClick:()=>t("Generate Key modal would open here","info"),children:[s.jsx(v,{className:"w-4 h-4"})," Generate New Key"]})}),s.jsxs("table",{className:"settings-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Key Prefix"}),s.jsx("th",{children:"Created"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:j.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"font-medium",children:e.name}),s.jsx("td",{className:"mono text-xs",children:e.prefix}),s.jsx("td",{className:"text-gray-400",children:e.created}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${e.status}`,children:e.status})}),s.jsx("td",{children:e.status==="active"&&s.jsx("button",{className:"btn-text-danger",onClick:()=>y(e.id),children:"Revoke"})})]},e.id))})]})]}),(a==="security"||a==="notifications")&&s.jsxs("div",{className:"empty-state",children:[s.jsx(u,{className:"w-12 h-12 text-gray-700 mb-4"}),s.jsx("p",{children:"This configuration section is under development."})]}),a==="debug"&&s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"debug-warning",children:[s.jsx(d,{className:"w-5 h-5 text-yellow-500"}),s.jsx("p",{children:"These tools are for testing error handling and debugging purposes only."})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Error Boundary Test"}),s.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Clicking this button will throw a JavaScript error to test the global Error Boundary."}),s.jsxs("button",{className:"btn-danger",onClick:()=>{throw new Error("Manual test error triggered from Settings")},children:[s.jsx(d,{className:"w-4 h-4"})," Trigger Crash"]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"API Error Simulation"}),s.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Force next API request to fail (simulates 500 Server Error)."}),s.jsxs("button",{className:"btn-secondary",onClick:()=>t("API Error Simulation enabled for next request","info"),children:[s.jsx(N,{className:"w-4 h-4"})," Simulate API Failure"]})]})]})]}),s.jsxs("div",{className:"content-footer",children:[s.jsx("button",{className:"btn-secondary",onClick:o,children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:p,disabled:h,children:h?s.jsx(N,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(T,{className:"w-4 h-4"})," Save Changes"]})})]})]})]})})}export{D as default};
